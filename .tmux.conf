# Set bind key
unbind C-b
unbind C-l
set -g prefix C-Space
# Set bind keys to arrange windows
unbind %
bind c new-window -c "#{pane_current_path}"
bind | split-window -h -c "#{pane_current_path}"
bind - split-window -v -c "#{pane_current_path}"
bind-key J resize-pane -D 3
bind-key K resize-pane -U 3
bind-key H resize-pane -L 3
bind-key L resize-pane -R 3
# Set bind key to switch to last window
bind-key C-Space last-window

# Set status bar
set -g status-bg black
set -g status-fg white
set -g status-left '#[fg=green]#H'
set-window-option -g window-status-current-style bg=red
set -g status-right '#[fg=yellow]#(uptime | cut -d ',' -f 2-)'
# Monitors activity
setw -g monitor-activity on
set -g visual-activity on

set-option -g default-terminal "screen-256color"
set -s escape-time 0
#setw -g aggressive-resize on
set -g base-index 1
bind-key l send-prefix

set-option -g status-keys emacs
set-option -gw mode-keys emacs
# bind-key -t emacs-copy C-v page-down
# bind-key -t emacs-copy M-v page-up
set -g history-limit 999999999

# Enable mouse support (works in iTerm)
set-option -g mouse on
# set -g mouse-resize-pane on
# set -g mouse-select-pane on
# set -g mouse-select-window on
# bind -n WheelUpPane copy-mode
bind -n WheelUpPane if-shell -F -t = "#{mouse_any_flag}" "send-keys -M" "if -Ft= '#{pane_in_mode}' 'send-keys -M' 'select-pane -t=; copy-mode -e; send-keys -M'"
bind -n WheelDownPane select-pane -t= \; send-keys -M

# Not needed on El Capitan
# set-option -g default-command "reattach-to-user-namespace -l zsh"
# Sane scrolling
set -g terminal-overrides 'xterm*:smcup@:rmcup@'

# Automatically renumber windows
set-option -g renumber-windows on

# Plugins
# Install with Ctrl-l + I
set -g @plugin 'nhdaly/tmux-scroll-copy-mode'
set -g @plugin 'tmux-plugins/tmux-resurrect'
set -g @plugin 'tmux-plugins/tmux-continuum'

# Automatic start tmux on boot
# set -g @continuum-boot 'on'
# set -g @continuum-boot-options 'iterm,fullscreen'

# Restore environment
set -g @continuum-restore 'on'
set -g @continuum-save-interval '10'
set -g @resurrect-processes ':all:'

run '~/.tmux/plugins/tpm/tpm'
new-session -n $HOS
